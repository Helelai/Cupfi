{"version":3,"file":"Label.js","sourceRoot":"../../../../src","sources":["components/Label/Label.tsx"],"names":[],"mappings":"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","sourcesContent":["'use client';\n\nimport * as React from 'react';\n\nimport {Xmark} from '@gravity-ui/icons';\n\nimport {ClipboardIcon} from '../ClipboardIcon';\nimport {CopyToClipboard} from '../CopyToClipboard';\nimport type {CopyToClipboardStatus} from '../CopyToClipboard';\nimport {Icon} from '../Icon';\nimport type {QAProps} from '../types';\nimport {block} from '../utils/cn';\n\nimport {LabelQa} from './constants';\n\nimport './Label.scss';\n\nconst b = block('label');\n\ntype SizeMapType = {copyIconSize: number; closeIconSize: number};\n\nconst sizeMap: Record<string, SizeMapType> = {\n    xs: {copyIconSize: 12, closeIconSize: 12},\n    s: {copyIconSize: 14, closeIconSize: 14},\n    m: {copyIconSize: 16, closeIconSize: 16},\n};\n\nexport interface LabelProps extends QAProps {\n    /** Label icon (at start) */\n    icon?: React.ReactNode;\n    /** Disabled state */\n    disabled?: boolean;\n    /** Handler for click on close button */\n    onCloseClick?(event: React.MouseEvent<HTMLButtonElement>): void;\n    /** Text to copy */\n    copyText?: string;\n    /** `aria-label` of close button */\n    closeButtonLabel?: string;\n    /** `aria-label` of copy button */\n    copyButtonLabel?: string;\n    /** Handler for copy event */\n    onCopy?(text: string, result: boolean): void;\n    /** Handler for click on label itself */\n    onClick?(event: React.MouseEvent<HTMLElement>): void;\n    /** Class name */\n    className?: string;\n    /** Content */\n    children?: React.ReactNode;\n    /** Display hover */\n    interactive?: boolean;\n    /** Label value (shows as \"children : value\") */\n    value?: string;\n    /** Label color */\n    theme?: 'normal' | 'info' | 'danger' | 'warning' | 'success' | 'utility' | 'unknown' | 'clear';\n    /** Label type (plain, with copy text button or with close button) */\n    type?: 'default' | 'copy' | 'close';\n    /** Label size */\n    size?: 'xs' | 's' | 'm';\n    /** Browser title for Label */\n    title?: string;\n}\n\nexport const Label = React.forwardRef(function Label(\n    props: LabelProps,\n    ref: React.Ref<HTMLDivElement>,\n) {\n    const {\n        type = 'default',\n        theme = 'normal',\n        size = 'xs',\n        title,\n        icon,\n        children,\n        onCloseClick,\n        className,\n        disabled,\n        copyText,\n        closeButtonLabel,\n        copyButtonLabel,\n        interactive = false,\n        value,\n        onCopy,\n        onClick,\n        qa,\n    } = props;\n    const hasContent = Boolean(children !== '' && React.Children.count(children) > 0);\n\n    const typeClose = type === 'close' && hasContent;\n    const typeCopy = type === 'copy' && hasContent;\n\n    const hasOnClick = typeof onClick === 'function';\n    const hasCopy = Boolean(typeCopy && copyText);\n    const isInteractive = (hasOnClick || hasCopy || interactive) && !disabled;\n    const {copyIconSize, closeIconSize} = sizeMap[size];\n\n    const startIcon = icon && (\n        <div className={b('addon', {side: hasContent ? 'start' : undefined, type: 'icon'})}>\n            {icon}\n        </div>\n    );\n    const content = hasContent && (\n        <div className={b('text')}>\n            <div className={b('content')}>{children}</div>\n            {Boolean(value) && (\n                <div className={b('value')}>\n                    <div className={b('separator')}>:</div>\n                    <div className={b('key')}>{value}</div>\n                </div>\n            )}\n        </div>\n    );\n\n    const renderLabel = (status?: CopyToClipboardStatus) => {\n        let actionButton: React.ReactNode;\n\n        if (typeCopy) {\n            actionButton = (\n                <button\n                    type=\"button\"\n                    aria-label={copyButtonLabel || undefined}\n                    onClick={hasOnClick ? onClick : undefined}\n                    disabled={disabled}\n                    className={b('addon', {\n                        side: 'end',\n                        type: 'button',\n                    })}\n                    data-qa={LabelQa.copyButton}\n                >\n                    <ClipboardIcon status={status || 'pending'} size={copyIconSize} />\n                </button>\n            );\n        } else if (typeClose) {\n            actionButton = (\n                <button\n                    type=\"button\"\n                    onClick={onCloseClick}\n                    aria-label={closeButtonLabel || undefined}\n                    disabled={disabled}\n                    className={b('addon', {\n                        side: 'end',\n                        type: 'button',\n                    })}\n                    data-qa={LabelQa.closeButton}\n                >\n                    <Icon size={closeIconSize} data={Xmark} />\n                </button>\n            );\n        }\n\n        return (\n            <div\n                ref={ref}\n                className={b(\n                    {\n                        theme,\n                        size,\n                        interactive: isInteractive,\n                        disabled,\n                    },\n                    className,\n                )}\n                title={title}\n                data-qa={qa}\n            >\n                {startIcon}\n                {hasOnClick ? (\n                    <button\n                        disabled={disabled}\n                        type=\"button\"\n                        onClick={onClick}\n                        className={b('main-button')}\n                        data-qa={LabelQa.mainButton}\n                    >\n                        {content}\n                    </button>\n                ) : (\n                    content\n                )}\n                {actionButton}\n            </div>\n        );\n    };\n\n    if (hasCopy && copyText && !hasOnClick) {\n        return (\n            <CopyToClipboard text={copyText} onCopy={onCopy} timeout={1000}>\n                {(status) => renderLabel(status)}\n            </CopyToClipboard>\n        );\n    }\n\n    return renderLabel();\n});\n"]}